<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Build Projects</title>
  <meta name="description" content="cmake-based high-level build system for multi-platform C/C++ projects
">

  <link rel="stylesheet" href="/fips/css/main.css">
  <link rel="canonical" href="http://floooh.github.com/fips/build.html">
</head>


  <body>

    <header class="site-header">

    <!-- this is the 'fork me on github' label -->
    <a href="https://github.com/floooh/fips"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

    <div class="site-title">
        fips
        <span class="site-subtitle">the friendly cmake wrapper</span>
    </div>
</header>




    <ul class="navigation">
    
        
        <li class="nav-item">
            <a href="/fips/index.html">About Fips</a>
        </li>
        
    
        
    
        
        <li class="nav-item">
            <a href="/fips/getstarted.html">Get Started</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/build.html">Build Projects</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/troubleshooting.html">Troubleshooting</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/crosscompiling.html">Cross-Compiling</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/cmakeguide.html">CMake Guide</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/imports.html">Imports</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/exports.html">Exports</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/codegen.html">Code Generation</a>
        </li>
        
    
        
        <li class="nav-item">
            <a href="/fips/dirstruct.html">Directory Structure</a>
        </li>
        
    
</ul>



    <div class="page-content">
        <div>

  <article>
    <h1 id="build-projects">Build Projects</h1>

<p>To build the default build configuration of a ‘fipsified’ project for your 
host platform, simply run ‘./fips build’ in its root directory:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> <span class="nb">cd</span> ~/fips-workspace
<span class="o">&gt;</span> git clone https://github.com/floooh/fips-hello-world.git
<span class="o">&gt;</span> <span class="nb">cd </span>fips-hello-world
<span class="o">&gt;</span> ./fips build
...
<span class="o">&gt;</span> _</code></pre></figure>

<p>By default, a non-optimized <em>debug</em> version will be built, to build
an optimized <em>release</em> version append the configuration name that is 
right for your host platform:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># on OSX:</span>
<span class="o">&gt;</span> ./fips build osx-xcode-release
...
<span class="c"># on Linux:</span>
<span class="o">&gt;</span> ./fips build linux-make-release
...
<span class="c"># on Windows:</span>
<span class="o">&gt;</span> ./fips build win64-vstudio-release
...
<span class="o">&gt;</span> _</code></pre></figure>

<h3 id="build-configs">Build Configs</h3>

<p>Build configs like <em>osx-xcode-release</em> are the core feature of fips. A
build config tells cmake how to compile the project:</p>

<ul>
  <li>the <strong>target platform</strong> to build for</li>
  <li>the <strong>build tool</strong> to use</li>
  <li>the <strong>build type</strong> (e.g. debug or release)</li>
  <li>additional cmake options to customize a build</li>
</ul>

<p>To get a list of build configurations, run ‘./fips list configs’:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips list configs
from /Users/floh/projects/fips/configs:
  android-make-debug
  android-make-release
  android-ninja-debug
  android-ninja-release
...
  win32-vstudio-debug
  win32-vstudio-release
  win64-vstudio-debug
  win64-vstudio-release
<span class="o">&gt;</span> _</code></pre></figure>

<p>There are dozens of build configs, but not all are supported on every
host platform, to test which build configs are supported, run 
‘./fips diag configs’:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips diag configs
<span class="o">===</span> configs:
android-make-debug
  ok
android-make-release
  ok
android-ninja-debug
  build tool <span class="s1">'ninja'</span> not found
android-ninja-release
  build tool <span class="s1">'ninja'</span> not found
...
<span class="o">&gt;</span> _</code></pre></figure>

<p>In this example, the build configurations which use the ‘ninja’ build tool
can not be used because ninja is currently not installed (see also ‘./fips
diag tools’).</p>

<h3 id="active-config">Active Config</h3>

<p>To save typing, an <em>active config</em> can be set per project. This will
be used if a fips command expects a config name, but none is given. 
Use ‘./fips set config [config-name]’ if you
want to compile the release version of a project instead of the default
debug version whenever ‘./fips build’ is run:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># on OSX:</span>
<span class="o">&gt;</span> ./fips <span class="nb">set </span>config osx-xcode-release
<span class="s1">'config'</span> <span class="nb">set </span>to <span class="s1">'osx-xcode-release'</span> <span class="k">in </span>project <span class="s1">'fips-hello-world'</span>
<span class="o">&gt;</span> ./fips build
...
<span class="c"># on Linux:</span>
<span class="o">&gt;</span> ./fips <span class="nb">set </span>config linux-make-release
<span class="s1">'config'</span> <span class="nb">set </span>to <span class="s1">'linux-make-release'</span> <span class="k">in </span>project <span class="s1">'fips-hello-world'</span>
<span class="o">&gt;</span> ./fips build
...
<span class="c"># on Windows:</span>
<span class="o">&gt;</span> ./fips <span class="nb">set </span>config win64-vstudio-release 
<span class="s1">'config'</span> <span class="nb">set </span>to <span class="s1">'win64-vstudio-release'</span> <span class="k">in </span>project <span class="s1">'fips-hello-world'</span>
<span class="o">&gt;</span> ./fips build
...
<span class="o">&gt;</span> _</code></pre></figure>

<p>Run ‘./fips list settings’ to check what the currently active config is:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips list settings
<span class="o">===</span> settings:
  config: osx-xcode-release
  target: None <span class="o">(</span>default value<span class="o">)</span></code></pre></figure>

<p>To revert back to the default config, run ‘./fips unset config’:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips <span class="nb">unset </span>config
<span class="s1">'config'</span> <span class="nb">unset </span><span class="k">in </span>project <span class="s1">'fips-hello-world'</span>
<span class="o">&gt;</span> ./fips list settings
<span class="o">===</span> settings:
  config: osx-xcode-debug <span class="o">(</span>default value<span class="o">)</span>
  target: None <span class="o">(</span>default value<span class="o">)</span>
<span class="o">&gt;</span> _</code></pre></figure>

<h3 id="build-targets">Build Targets</h3>

<p>Projects are usually made of several build targets, of which fips has 3
types:</p>

<ul>
  <li><strong>apps</strong>: statically linked applications</li>
  <li><strong>modules</strong>: high level static libraries with dependencies to other modules</li>
  <li><strong>libs</strong>: low-level static libraries, usually 3rd party code with custom compile
settings</li>
</ul>

<p>The targets a project is made of and their dependencies are described
in CMakeLists.txt files. This is a complex topic for later. For now let’s just
see how to list the targets of a project, and how to build and run specific
targets.</p>

<p>To get a list of targets in the current project, run ‘./fips list targets’
from the project root directory. For this to work, cmake must have generated 
build files before via ‘./fips gen’:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips gen
...
<span class="o">&gt;</span> ./fips list targets
<span class="o">===</span> targets:
  config: osx-xcode-debug
  lib:
  module:
    dep1
    dep2
  app:
    hello
<span class="o">&gt;</span> _ </code></pre></figure>

<p>A specific target can be built with ‘./fips make [target]’:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips make hello
...
<span class="o">&gt;</span> _</code></pre></figure>

<p>App targets can be run with ‘./fips run [target]’:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">&gt;</span> ./fips run hello
<span class="o">===</span> run <span class="s1">'hello'</span> <span class="o">(</span>config: osx-xcode-debug, project: fips-hello-world<span class="o">)</span>:
Hello World!
Hello from dep1
Hello from dep2!
Imported string define: Bla
Imported int define: 1
<span class="o">&gt;</span> _</code></pre></figure>


  </article>

</div>

    </div>

  </body>

</html>
