<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Cross-compiling
  
 | Fips Docs</title>



<link rel="stylesheet" href="/fips/book.min.bff781db5420417a98b39d5c502a421476ceee7df3af700be24e8554146bfa51.css">


<link rel="icon" href="/fips/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://floooh.github.com/fips/">Fips Docs</a>
</h2>



    

  
  





 
  
    

  <ul>
    
    
    <li>
      

  <a href="/fips/docs/getstarted/" >
    
  
    
    Get Started
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/build/" >
    
  
    
    Build Projects
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/troubleshooting/" >
    
  
    
    Troubleshooting
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/crosscompiling/"  class="active">
    
  
    
    Cross-compiling
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/cmakeguide/" >
    
  
    
    CMake Guide
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/imports/" >
    
  
    
    Imports
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/exports/" >
    
  
    
    Exports
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/codegen/" >
    
  
    
    Code Generation
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/dirstructure/" >
    
  
    
    Directory Structure
  

  </a>


    </li>
    
  </ul>


  











</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/fips/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Cross-compiling
  
</strong>
</header>

      
<article class="markdown"><h1 id="cross-compiling">Cross-Compiling</h1>
<p>Fips provides easy cross-compiling support to the following platforms:</p>
<ul>
<li><strong>iOS</strong></li>
<li><a href="https://developer.android.com/tools/sdk/ndk/index.html"><strong>Android</strong></a></li>
<li><a href="http://kripken.github.io/emscripten-site/index.html"><strong>emscripten</strong></a></li>
</ul>
<p>Cross-compilation to iOS is only supported on the OSX host platform. All
other target platforms are supported on all 3 host platforms (OSX, Linux, Windows).</p>
<h3 id="setting-up-the-platform-sdks">Setting up the platform SDKs</h3>
<p>Fips provides simple commands to setup the SDKs for Android and emscripten:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; ./fips setup emscripten
&gt; ./fips setup android
</code></pre></div><p>This will download, unpack and setup the respective SDKs into a directory
<em>fips-sdks</em> next to the fips directory.</p>
<blockquote>
<p>NOTE: there is currently no way to use an SDK installed to another location</p>
</blockquote>
<p>You should also run &lsquo;fips diag tools&rsquo; to make sure that all required
tools are in the path:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; ./fips diag tools
...
</code></pre></div><h3 id="testing-cross-compilation">Testing cross-compilation</h3>
<p>Cross-compilation requires a portable code base, in the case of Android this
is a bit non-trivial (e.g. the canonical C &lsquo;Hello World&rsquo; doesn&rsquo;t
work). Let&rsquo;s use the Oryol 3D engine for testing:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; ./fips clone oryol
&gt; cd ../oryol
</code></pre></div><p>First let&rsquo;s try whether <strong>emscripten</strong> compilation works:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; ./fips set config emsc-make-release
&gt; ./fips build
...
&gt; ./fips run Triangle
</code></pre></div><p>The last command should open the default web browser and a local http server.
It may be necessary to refresh the page in case the http server needs too long
to start.</p>
<p>Same for <strong>Android</strong>, note that Android provides 3 types of config, one for each
CPU type.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; ./fips build android-make-release
&gt; ./fips build androidx86-make-release
&gt; ./fips build androidmips-make-release

&gt; NOTE: Android MIPS is not yet fully supported on Oryol!
</code></pre></div><p>Finally iOS: this works a bit differently since iOS compiling and debugging
works best directly in Xcode. Instead of a command line build, we only
generate the Xcode project files, and then start Xcode:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&gt; ./fips set config ios-xcode-debug
&gt; ./fips set iosteam XYZW123456
&gt; ./fips gen
&gt; ./fips open
</code></pre></div><p>Note the <strong>./fips set iosteam XYZW123456</strong> before the first call to <strong>./fips gen</strong>.
This sets the <em>iOS Development Team ID</em> for each target in the Xcode project,
so you don&rsquo;t need to do this manually each time you generate the solution.
The team id will be written to the local file <em>.fips-settings.yml</em> in the project
directory, so you only need to do this once before the first <strong>./fips gen</strong>.</p>
<p>You can lookup your team id on the Apple Developer web site:
<a href="https://developer.apple.com/account/#/membership">https://developer.apple.com/account/#/membership</a></p>
<p>Once in Xcode, the samples can be compiled and debugged either in the simulator
or on a real device (provided Xcode is properly setup for iOS development).</p>
<h3 id="under-the-hood">Under the hood</h3>
<p>Cross-compiling currently has a few caveats:</p>
<ul>
<li>it is currently not possible to use existing SDKs in other filesystem locations</li>
<li>the <em>emscripten</em> SDK always uses the <em>incoming</em> branch, not the <em>master</em> branch</li>
<li>for Android, &lsquo;universal binaries&rsquo; containing ARM, X86 and MIPS binaries are
currently not supported</li>
</ul>
<p>Cross-compiling build settings are defined in cmake toolchain files in:</p>
<ul>
<li>fips/cmake-toolchains/android.toolchain.cmake</li>
<li>fips/cmake-toolchains/emscripten.toolchain.cmake</li>
<li>fips/cmake-toolchains/ios.toolchain.cmake</li>
</ul>
<p>Fips projects can override these standard toolchain files, or define
completely new toolchain files, by creating
a directory named &lsquo;fips-files/toolchains&rsquo; in the project root directory, and
placing cmake toolchain files there.</p>
<p>Fips will search for toolchain files in the following order:</p>
<ul>
<li>first in the current project</li>
<li>then in imported projects</li>
<li>finally in the fips directory</li>
</ul>
<p>With this search order, fips projects can either override fips&rsquo; standard
toolchain files, or toolchain files provided by imported projects.</p>
<p>Fips build configs can support completely new platforms by setting the
<strong>cmake-toolchain</strong> attribute to the name of a custom toolchain file.</p>
<p>For some target platforms, cmake generates additional files during the cmake run:</p>
<p>On <strong>Android</strong>, a Java wrapper application directory and AndroidManifest.xml
file is created (see fips/cmake/fips_android.cmake).</p>
<p>On <strong>iOS</strong>, a .plist file is generated (see fips/cmake/fips_osx.cmake).</p>
</article>

      

      
    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#setting-up-the-platform-sdks">Setting up the platform SDKs</a></li>
        <li><a href="#testing-cross-compilation">Testing cross-compilation</a></li>
        <li><a href="#under-the-hood">Under the hood</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
