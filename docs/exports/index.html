<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Exports
  
 | Fips Docs</title>



<link rel="stylesheet" href="/fips/book.min.a40af3dc8c0a4d2d9dd31b0865c32c72becf072fcbd75fa08f4d97e7a027e555.css">


<link rel="icon" href="/fips/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">

    <aside class="book-menu fixed">
      <nav role="navigation">
<h2 class="book-brand">
  <a href="http://floooh.github.io/fips/">Fips Docs</a>
</h2>



    

  
  





 
  
    

  <ul>
    
    
    <li>
      

  <a href="/fips/docs/getstarted/" >
    
  
    
    Get Started
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/build/" >
    
  
    
    Build Projects
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/troubleshooting/" >
    
  
    
    Troubleshooting
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/crosscompiling/" >
    
  
    
    Cross-compiling
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/cmakeguide/" >
    
  
    
    CMake Guide
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/imports/" >
    
  
    
    Imports
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/exports/"  class="active">
    
  
    
    Exports
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/codegen/" >
    
  
    
    Code Generation
  

  </a>


    </li>
    
    <li>
      

  <a href="/fips/docs/dirstructure/" >
    
  
    
    Directory Structure
  

  </a>


    </li>
    
  </ul>


  











</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-page">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/fips/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Exports
  
</strong>
</header>

      
<article class="markdown"><h1 id="exporting-from-fips-projects">Exporting from fips projects</h1>
<p>A fipsified project can provide different types of &rsquo;exports&rsquo; to other
fips projects:</p>
<ul>
<li>code modules</li>
<li>header search paths</li>
<li>pre-compiled static libs</li>
<li>C/C++ preprocessor defines</li>
<li>a cmake include which is included in root CMakeLists.txt files of importing projects</li>
<li>new fips commands</li>
<li>build configs</li>
<li>code generator scripts</li>
</ul>
<h3 id="exporting-code-modules">Exporting Code Modules</h3>
<p>Projects can export modules defined with the fips_begin_module() and
fips_begin_lib() commands in under the &rsquo;exports&rsquo; section of the fips.yml
file.</p>
<p>For instance, here are the exported modules of the Oryol 3D engine:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">exports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">modules </span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># engine modules</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Core </span><span class="p">:</span><span class="w">          </span><span class="l">code/Modules/Core</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">IO </span><span class="p">:</span><span class="w">            </span><span class="l">code/Modules/IO</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Messaging </span><span class="p">:</span><span class="w">     </span><span class="l">code/Modules/Messaging</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">HTTP </span><span class="p">:</span><span class="w">          </span><span class="l">code/Modules/HTTP</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Gfx </span><span class="p">:</span><span class="w">           </span><span class="l">code/Modules/Gfx</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Resource </span><span class="p">:</span><span class="w">      </span><span class="l">code/Modules/Resource</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Assets </span><span class="p">:</span><span class="w">        </span><span class="l">code/Modules/Assets</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Time </span><span class="p">:</span><span class="w">          </span><span class="l">code/Modules/Time</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Dbg </span><span class="p">:</span><span class="w">           </span><span class="l">code/Modules/Dbg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Input </span><span class="p">:</span><span class="w">         </span><span class="l">code/Modules/Input</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">Synth </span><span class="p">:</span><span class="w">         </span><span class="l">code/Modules/Synth</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">NanoVG </span><span class="p">:</span><span class="w">        </span><span class="l">code/Modules/NanoVG</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c"># ext libs</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">ConvertUTF</span><span class="p">:</span><span class="w">         </span><span class="l">code/Ext/ConvertUTF</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">android-native</span><span class="p">:</span><span class="w">     </span><span class="l">code/Ext/android_native</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">flextgl</span><span class="p">:</span><span class="w">            </span><span class="l">code/Ext/flextgl</span><span class="w">
</span></span></span></code></pre></div><p>The &lsquo;value&rsquo; in the modules export dictionary is the directory where the
CMakeLists.txt file of the module lives, relative to the project root directory.</p>
<p>The &lsquo;key&rsquo; value must be identical with the name of the module defined in the
CMakeLists.txt file.</p>
<h3 id="exporting-header-search-paths">Exporting Header Search Paths</h3>
<p>Projects can export a list of header search paths in their fips.yml file which
are then defined in  the toplevel CMakeLists.txt file of the importing project
and are visible to the entire project:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">exports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">header-dirs </span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">code</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">code/Modules</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">code/Ext</span><span class="w">
</span></span></span></code></pre></div><p>Of course it is also possible to directly use &lsquo;fips_include_directories()&rsquo;
or &lsquo;include_directories()&rsquo; in imported CMakeLists.txt files, but be aware
that these only propagate downwards in the CMakeLists.txt hierarchy, not
upwards.</p>
<h3 id="exporting-precompiled-static-libs">Exporting Precompiled Static Libs</h3>
<p>Exporting precompiled static libs works a bit differently, they are not
defined in the fips.yml file, instead fips checks if the imported project
has a &rsquo;libs&rsquo; directory. If yes, library search paths are automatically
added in the importing project, so that the imported libs are found
automatically by fips_libs().</p>
<p>Static link libs need to be located in subdirectories of &rsquo;libs&rsquo; named
after the target platform the libs are compiled for:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">┗━━ fips-sdks/
</span></span><span class="line"><span class="cl">    ┗━━ osx/
</span></span><span class="line"><span class="cl">    ┗━━ win32/
</span></span><span class="line"><span class="cl">    ┗━━ win64/
</span></span><span class="line"><span class="cl">    ┗━━ linux/
</span></span><span class="line"><span class="cl">    ┗━━ emscripten/
</span></span><span class="line"><span class="cl">    ┗━━ ios/
</span></span><span class="line"><span class="cl">    ┗━━ android/
</span></span></code></pre></div><p>There&rsquo;s no directory separation for release and debug versions of precompiled
libs. If you need this, it must be handled through differently named libs
(e.g. a _d postfix for debug libs).</p>
<blockquote>
<p>NOTE: the way how static library imports are defined may change in the
future (moving them into the fips.yml file)</p>
</blockquote>
<h3 id="exporting-cc-preprocessor-defines">Exporting C/C++ Preprocessor Defines</h3>
<p>Projects can list C/C++ preprocessor defines as key/value pairs in the
export section of the fips.yml file. These defines are visible in the
entire CMakeLists.txt hierarchy of the importing project. Here&rsquo;s an
example from fips-glm to set the angle unit to radians:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">exports </span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">defines </span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">GLM_FORCE_RADIANS </span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span></code></pre></div><p>For finer control (e.g. define different defines for different platforms)
it is better to directly use cmake add_defines() statements in the
fips-include.cmake file (discussed below).</p>
<h3 id="the-fips-includecmake-file">The fips-include.cmake File</h3>
<p>Projects can place an optional fips-include.cmake file into their
root directory with additional cmake statements. This file is both
included when building the project directory, as well as in the
toplevel CMakeLists.txt file of importing projects. Have a look
at Oryol&rsquo;s fips-include.cmake file for an example:</p>
<p><a href="https://github.com/floooh/oryol/blob/master/fips-include.cmake">https://github.com/floooh/oryol/blob/master/fips-include.cmake</a></p>
<h3 id="adding-new-fips-commands">Adding New Fips Commands</h3>
<p>Projects can have an optional directory &lsquo;fips-files/verbs&rsquo; containing
python scripts which add new subcommands (== verbs) to fips. The
name of the python script (without the .py) is the name of the
command, and the script must define two special functions <strong>help</strong>
and <strong>run</strong>:</p>
<ul>
<li><strong>help()</strong>: this is called when &lsquo;fips help&rsquo; is invoked, should print
a help message formatted like the other builtin help messges</li>
<li><strong>run(fips_dir, proj_dir, args)</strong>: contains the actual logic of the
command. The args fips_dir and proj_dir are the absolute paths
to the fips directory and the project directory where the command
is run from. Args is a string array of all arguments given to the
command.</li>
</ul>
<p>As an example, have a look at Oryol&rsquo;s &lsquo;webpage&rsquo; command here:</p>
<p><a href="https://github.com/floooh/oryol/blob/master/fips-files/verbs/webpage.py">https://github.com/floooh/oryol/blob/master/fips-files/verbs/webpage.py</a></p>
<h3 id="build-configs">Build Configs</h3>
<p>Projects can define new build configs which extend fips&rsquo; builtin
configs. These build config files must be located in a subdirectory
called &lsquo;fips-files/configs&rsquo;.</p>
<p>Again, here&rsquo;s are example configs in the Oryol engine:</p>
<p><a href="https://github.com/floooh/oryol/tree/master/fips-files/configs">https://github.com/floooh/oryol/tree/master/fips-files/configs</a></p>
<h3 id="code-generator-scripts">Code Generator Scripts</h3>
<p>Projects can extend fips with code generation python scripts in the
&lsquo;fips-files/generators&rsquo; subdirectory. The details are described on the
<a href="/fips/codegen.html">Code Generation Page</a>.</p>
</article>

      

      
    </div>

    
  
  
  <aside class="book-toc fixed">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#exporting-code-modules">Exporting Code Modules</a></li>
        <li><a href="#exporting-header-search-paths">Exporting Header Search Paths</a></li>
        <li><a href="#exporting-precompiled-static-libs">Exporting Precompiled Static Libs</a></li>
        <li><a href="#exporting-cc-preprocessor-defines">Exporting C/C++ Preprocessor Defines</a></li>
        <li><a href="#the-fips-includecmake-file">The fips-include.cmake File</a></li>
        <li><a href="#adding-new-fips-commands">Adding New Fips Commands</a></li>
        <li><a href="#build-configs">Build Configs</a></li>
        <li><a href="#code-generator-scripts">Code Generator Scripts</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </aside>



  </main>
  
  
  
</body>

</html>
